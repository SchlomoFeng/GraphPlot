# GraphPlot - 管网图纸拓扑结构可视化工具

## 项目介绍

本项目是一个基于Web的管网图纸拓扑结构可视化工具，能够解析和可视化管网的JSON数据，提供交互式的图形显示界面。

## 功能特点

### 🔍 数据解析
- ✅ 自动解析JSON文件中的 `nodelist` 和 `linklist` 数据
- ✅ 提取节点的坐标信息、类型信息和连接关系
- ✅ 智能处理节点parameter字段中的type信息
- ✅ 支持209个节点和206条连接的大规模数据

### 🎨 图形可视化
- ✅ **节点可视化**：根据坐标信息精确定位节点位置
- ✅ **形状区分**：不同type的节点使用不同形状表示
  - 🔷 **阀门(VavlePro)** - 蓝色菱形 (36个)
  - 🟧 **混合器(Mixer)** - 橙色方形 (21个)
  - 🔺 **三通(Tee)** - 橙色三角形 (68个)
  - 🟢 **流体(Stream)** - 绿色菱形 (84个)
- ✅ **边绘制**：根据sourceid和targetid绘制连接线
- ✅ **标签显示**：节点和边的名称标签
- ✅ **颜色编码**：支持不同类型的样式区分

### 🖱️ 交互功能
- ✅ **鼠标操作**：
  - 悬停显示详细信息工具提示
  - 点击选择节点和边
  - 鼠标滚轮缩放
  - 拖拽平移视图
- ✅ **控制面板**：
  - 缩放滑块控制 (0%-500%)
  - 标签显示开关
  - 重置视图按钮
- ✅ **信息面板**：显示选中节点/边的详细属性
- ✅ **统计信息**：实时显示节点数、连接数、类型数

### 📤 导出功能
- ✅ PNG格式图片导出
- ✅ SVG矢量图导出
- ✅ 保持原始质量和比例

### 📱 响应式设计
- ✅ 适配不同屏幕尺寸
- ✅ 移动端友好界面
- ✅ 清晰的中文界面

## 技术实现

- **前端技术栈**：原生JavaScript + SVG + HTML5 + CSS3
- **数据格式**：JSON (支持UTF-8编码)
- **图形渲染**：SVG原生渲染，性能优化
- **交互实现**：原生DOM事件处理
- **无依赖**：不依赖外部库，轻量级实现

## 文件结构

```
GraphPlot/
├── index.html                    # 主页面
├── css/
│   └── style.css                # 样式文件
├── js/
│   ├── data-parser.js           # JSON数据解析模块
│   ├── graph-visualizer-vanilla.js  # 图形可视化模块
│   └── main.js                  # 主应用控制器
├── 0708烟台_updated.txt         # 默认数据文件
├── GraphPlot_0708YTS4.py        # Python图形分析脚本
├── GraphClustering.py           # Python聚类分析脚本
└── README.md                    # 项目说明
```

## 使用方法

### 1. 启动应用
```bash
# 使用Python启动本地服务器
python3 -m http.server 8000

# 或使用Node.js
npx http-server

# 浏览器访问
http://localhost:8000
```

### 2. 加载数据
- **自动加载**：点击"加载默认数据"按钮加载内置的烟台管网数据
- **文件上传**：点击"加载数据文件"选择本地JSON/TXT文件
- **拖拽文件**：直接将文件拖拽到可视化区域

### 3. 交互操作
- **缩放**：使用鼠标滚轮或缩放滑块
- **平移**：拖拽空白区域移动视图
- **选择**：点击节点或连接查看详细信息
- **重置**：点击"重置视图"回到最佳显示状态

### 4. 导出结果
- 点击"导出PNG"保存为图片
- 点击"导出SVG"保存为矢量图

## 数据格式

支持的JSON数据格式：
```json
{
  "nodelist": [
    {
      "id": "节点ID",
      "name": "节点名称", 
      "parameter": {
        "type": "节点类型",
        "styles": {
          "position": {"x": 坐标X, "y": 坐标Y}
        }
      }
    }
  ],
  "linklist": [
    {
      "id": "连接ID",
      "name": "连接名称",
      "sourceid": "起点节点ID",
      "targetid": "终点节点ID",
      "parameter": {
        "type": "连接类型"
      }
    }
  ]
}
```

## 示例数据

项目包含烟台管网的真实数据（`0708烟台_updated.txt`），包含：
- 209个节点（阀门、混合器、三通、流体节点）
- 206条管道连接
- 完整的坐标和属性信息

## 兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ✅ 移动端浏览器

## 性能特点

- 🚀 支持200+节点的流畅渲染
- 🚀 原生SVG性能优化
- 🚀 内存占用小
- 🚀 加载速度快

## 开发计划

- [ ] 节点搜索和过滤功能
- [ ] 图层管理
- [ ] 数据导入向导
- [ ] 更多节点形状支持
- [ ] 动画效果优化

## 许可证

本项目采用开源许可证，欢迎贡献代码和建议。